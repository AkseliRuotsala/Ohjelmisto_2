<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Task 3</title>
</head>
<body>
    <h1>TV Series Search (Results)</h1>

    <form id="search-form">
        <input id="query" name="q" type="text" placeholder="Enter TV series name">
        <input type="submit" value="Search">
    </form>

    <div id="results"></div>

    <script>
        const searchForm = document.querySelector('#search-form');
        const resultsContainer = document.querySelector('#results');

        searchForm.addEventListener('submit', async function(evt) {
            evt.preventDefault();
            const query = document.querySelector('#query').value;

            try {
                const response = await fetch(`https://api.tvmaze.com/search/shows?q=${query}`);
                const jsonData = await response.json();

                resultsContainer.innerHTML = '';

                for (const tvShow of jsonData) {
                    const show = tvShow.show;

                    const article = document.createElement('article');

                    const h2 = document.createElement('h2');
                    h2.innerText = show.name;

                    const link = document.createElement('a');
                    link.href = show.url;
                    link.innerText = "Go to details";
                    link.target = "_blank";

                    const img = document.createElement('img');
                    img.src = show.image?.medium;
                    img.alt = show.name;

                    const divSummary = document.createElement('div');
                    divSummary.innerHTML = show.summary; // Summary sisältää HTML-tageja

                    article.appendChild(h2);
                    article.appendChild(img);
                    article.appendChild(divSummary);
                    article.appendChild(link);

                    resultsContainer.appendChild(article);
                }
            } catch (error) {
                console.log(error.message);
            }
        });
    </script>
</body>
</html>